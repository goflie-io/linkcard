<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="robots" content="noindex,nofollow" />
  <title>注目トピック</title>
  <!-- OGP タグ -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="相手を洗脳レベルで説得する心理学3選" />
  <meta property="og:description" content="続きはタップで再生" />
  <meta property="og:image" content="https://goflie-io.github.io/linkcard/card20.jpg" />
  <meta property="og:url" content="https://goflie-io.github.io/linkcard/index20.html" />
  <meta property="og:site_name" content="linkcard" />
  <meta name="twitter:card" content="summary_large_image" />
  <style>
    /* 必要に応じてスタイルを調整 */
    html, body { height:100%; margin:0; background:#fff; font-family: sans-serif; }
    .page { max-width: 560px; margin: 0 auto; padding: 14px; }
    .hero { position:relative; aspect-ratio:16/9; background:#000; }
    .hero img { width:100%; height:100%; object-fit:cover; }
    .overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
               background:linear-gradient(to bottom, rgba(0,0,0,.1), rgba(0,0,0,.22)); }
    .btn { appearance:none; border:none; border-radius:50%; padding:14px 22px; font-size:16px; font-weight:900;
           background:#fff; color:#111; box-shadow:0 10px 22px rgba(0,0,0,.18); }
    .body { padding:14px; }
    .title { font-size:22px; font-weight:900; margin:2px 0 6px; }
    .meta { color:#666; font-size:13px; margin-bottom:6px; }
    .desc { color:#333; line-height:1.6; }
    .note { margin-top:14px; padding:12px; border-radius:14px; background:#f6f6f6; color:#666; font-size:13px; }
  </style>
</head>
<body>
  <div class="page">
    <div class="hero">
      <img src="https://goflie-io.github.io/linkcard/card20.jpg" alt="thumbnail" />
      <div class="overlay">
        <button class="btn" id="openBtn">▶ 続きを視聴</button>
      </div>
    </div>
    <div class="body">
      <div class="title">注目の話題：続きは外部で視聴できます</div>
      <div class="meta">ピックアップ・タップで再生・外部で視聴</div>
      <p class="desc">ここではサムネイルのみ表示しています。続きは上のボタン（または画面タップ）で再生できます。</p>
      <div class="note">※開かない場合は右上「…」→「ブラウザで開く」をお試しください。</div>
      <div class="tiny" id="status"></div>
    </div>
  </div>

  <script>
    // TikTok Lite招待リンク
    const TARGET_URL = "https://lite.tiktok.com/t/ZSHEmMN7ug6nV-kWyjB/";

    // Intent URI を生成する関数
    function makeIntent(url, pkg) {
      const u = new URL(url);
      return `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=${u.protocol.replace(":", "")};package=${pkg};end`;
    }

    // Android用 Intent 配列（TikTok Liteと通常TikTok両対応）
    const ANDROID_INTENTS = [
      makeIntent(TARGET_URL, "com.ss.android.ugc.trill.go"),  // TikTok Lite
      makeIntent(TARGET_URL, "com.ss.android.ugc.trill"),     // TikTok本体
      makeIntent(TARGET_URL, "com.zhiliaoapp.musically")      // TikTok旧パッケージ
    ];

    const statusEl = document.getElementById("status");
    const openBtn  = document.getElementById("openBtn");

    function isInAppBrowser() {
      const ua = navigator.userAgent || "";
      return /Threads|Instagram|FBAN|FBAV/i.test(ua);
    }
    function setStatus(msg) { statusEl.textContent = msg; }

    function tryOpen() {
      setStatus("読み込み中…");
      // ① 通常URLで遷移
      location.href = TARGET_URL;

      // ② Intent URIでアプリ起動を試み
      let delay = 250;
      ANDROID_INTENTS.forEach(intentUrl => {
        setTimeout(() => { location.href = intentUrl; }, delay);
        delay += 250;
      });

      // ③ インストラクション表示
      setTimeout(() => {
        if (isInAppBrowser()) {
          setStatus("開かない場合は右上「…」→「ブラウザで開く」をお試しください。");
        } else {
          setStatus("開かない場合はもう一度タップしてください。");
        }
      }, 1200);
    }

    // クリックで遷移試行
    openBtn.addEventListener("click", e => { e.preventDefault(); tryOpen(); });
    document.body.addEventListener("click", e => { e.preventDefault(); tryOpen(); });
    // 自動遷移も可
    setTimeout(() => { tryOpen(); }, 350);
  </script>
</body>
</html>
