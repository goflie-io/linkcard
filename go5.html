<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>読み込み中…</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif}
    .c{height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px}
    .small{color:#666;font-size:14px}
    a{color:#0b57d0}
  </style>
</head>
<body>
  <div class="c">
    <div>読み込み中…</div>
    <div class="small">自動で開かない場合は <a id="manual" href="#">こちら</a></div>
  </div>

<script>
  const URL = "https://lite.tiktok.com/t/ZSHEmMN7ug6nV-kWyjB/";

  function makeIntent(url, pkg) {
    const u = new URL(url);
    return `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=${u.protocol.replace(":","")};package=${pkg};end`;
  }

  const INTENT_LITE = makeIntent(URL, "com.ss.android.ugc.trill");
  const INTENT_TT   = makeIntent(URL, "com.zhiliaoapp.musically");

  document.getElementById("manual").href = URL;

  function fire() {
    // 1) まずURL
    location.href = URL;

    // 2) 少し遅らせて intent（Chromeで効きやすい）
    setTimeout(()=>{ location.href = INTENT_LITE; }, 120);
    setTimeout(()=>{ location.href = INTENT_TT;   }, 240);
  }

  // ユーザータップ由来で開かれているので、load後すぐ実行でOK
  window.addEventListener("load", () => setTimeout(fire, 50));
</script>
</body>
</html>
